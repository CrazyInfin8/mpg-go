vcs: https://github.com/phoboslab/pl_mpeg

root: .

out: .

package: mpg

define: 
  - name: PL_MPEG_IMPLEMENTATION

# Generates license, copywrite, and "DO NOT EDIT" flag
exec_after: ["sed", "-i", "1s/^/\\/\\/ Code generated by go generate; DO NOT EDIT.\\n\\n\\/\\/ PL_MPEG Copywrite Dominic Szablewski\\n\\/\\/\\n\\/\\/ Permission is hereby granted, free of charge, to any person obtaining a copy of\\n\\/\\/ this software and associated documentation files(the \"Software\"), to deal in\\n\\/\\/ the Software without restriction, including without limitation the rights to\\n\\/\\/ use, copy, modify, merge, publish, distribute, sublicense, and \\/ or sell copies\\n\\/\\/ of the Software, and to permit persons to whom the Software is furnished to do\\n\\/\\/ so, subject to the following conditions :\\n\\/\\/ The above copyright notice and this permission notice shall be included in all\\n\\/\\/ copies or substantial portions of the Software.\\n\\/\\/ THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\n\\/\\/ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\n\\/\\/ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.IN NO EVENT SHALL THE\\n\\/\\/ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\n\\/\\/ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\n\\/\\/ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\n\\/\\/ SOFTWARE.\\n\\n/", "pl_mpeg.go"]

# Hide C constants and variables from external Go packages for cleanliness
files:
  - name: pl_mpeg.h
    replace:
      - old: PLM_PACKET_INVALID_TS
        new: plm_packet_invalid_ts1
      - old: PLM_AUDIO_SAMPLES_PER_FRAME
        new: plm_audio_samples_per_frame
      - old: PLM_BUFFER_DEFAULT_SIZE
        new: plm_buffer_default_size
      - old: "TRUE"
        new: "_true"
      - old: "FALSE"
        new: "_false"
      - old: PLM_DEMUX_PACKET_PRIVATE
        new: plm_demux_packet_private
      - old: PLM_DEMUX_PACKET_AUDIO_1
        new: plm_demux_packet_audio_1
      - old: PLM_DEMUX_PACKET_AUDIO_2
        new: plm_demux_packet_audio_2
      - old: PLM_DEMUX_PACKET_AUDIO_3
        new: plm_demux_packet_audio_3
      - old: PLM_DEMUX_PACKET_AUDIO_4
        new: plm_demux_packet_audio_4
      - old: PLM_DEMUX_PACKET_VIDEO_1
        new: plm_demux_packet_video_1
      - old: PLM_BUFFER_MODE_FILE
        new: plm_buffer_mode_file
      - old: PLM_BUFFER_MODE_FIXED_MEM
        new: plm_buffer_mode_fixed_mem
      - old: PLM_BUFFER_MODE_RING
        new: plm_buffer_mode_ring
      - old: PLM_BUFFER_MODE_APPEND
        new: plm_buffer_mode_append
      - old: PLM_START_PACK
        new: plm_start_pack
      - old: PLM_START_END
        new: plm_start_end
      - old: PLM_START_SYSTEM
        new: plm_start_system
      - old: PLM_VIDEO_PICTURE_TYPE_INTRA
        new: plm_video_picture_type_intra
      - old: PLM_VIDEO_PICTURE_TYPE_PREDICTIVE
        new: plm_video_picture_type_predictive
      - old: PLM_VIDEO_PICTURE_TYPE_B
        new: plm_video_picture_type_b
      - old: PLM_START_SEQUENCE
        new: plm_start_sequence
      - old: PLM_START_SLICE_FIRST
        new: plm_start_slice_first
      - old: PLM_START_SLICE_LAST
        new: plm_start_slice_last
      - old: PLM_START_PICTURE
        new: plm_start_picture
      - old: PLM_START_EXTENSION
        new: plm_start_extension
      - old: PLM_START_USER_DATA
        new: plm_start_user_data
      - old: PLM_VIDEO_PICTURE_RATE
        new: plm_video_picture_rate
      - old: PLM_VIDEO_ZIG_ZAG
        new: plm_video_zig_zag
      - old: PLM_VIDEO_INTRA_QUANT_MATRIX
        new: plm_video_intra_quant_matrix
      - old: PLM_VIDEO_NON_INTRA_QUANT_MATRIX
        new: plm_video_non_intra_quant_matrix
      - old: PLM_VIDEO_PREMULTIPLIER_MATRIX
        new: plm_video_premultiplier_matrix
      - old: PLM_VIDEO_MACROBLOCK_ADDRESS_INCREMENT
        new: plm_video_macroblock_address_increment
      - old: PLM_VIDEO_MACROBLOCK_TYPE_INTRA
        new: plm_video_macroblock_type_intra
      - old: PLM_VIDEO_MACROBLOCK_TYPE_PREDICTIVE
        new: plm_video_macroblock_type_predictive
      - old: PLM_VIDEO_MACROBLOCK_TYPE_B
        new: plm_video_macroblock_type_b
      - old: PLM_VIDEO_MACROBLOCK_TYPE
        new: plm_video_macroblock_type
      - old: PLM_VIDEO_CODE_BLOCK_PATTERN
        new: plm_video_code_block_pattern
      - old: PLM_VIDEO_MOTION
        new: plm_video_motion
      - old: PLM_VIDEO_DCT_SIZE_LUMINANCE
        new: plm_video_dct_size_luminance
      - old: PLM_VIDEO_DCT_SIZE_CHROMINANCE
        new: plm_video_dct_size_chrominance
      - old: PLM_VIDEO_DCT_SIZE
        new: plm_video_dct_size
      - old: PLM_VIDEO_DCT_COEFF
        new: plm_video_dct_coeff
      - old: PLM_AUDIO_QUANT_TAB
        new: plm_audio_quant_tab
      - old: PLM_AUDIO_FRAME_SYNC
        new: plm_audio_frame_sync
      - old: PLM_AUDIO_MPEG_2_5
        new: plm_audio_mpeg_2_5
      - old: PLM_AUDIO_MPEG_2
        new: plm_audio_mpeg_2
      - old: PLM_AUDIO_MPEG_1
        new: plm_audio_mpeg_1
      - old: PLM_AUDIO_LAYER_III
        new: plm_audio_layer_iii
      - old: PLM_AUDIO_LAYER_II
        new: plm_audio_layer_ii
      - old: PLM_AUDIO_LAYER_I
        new: plm_audio_layer_i
      - old: PLM_AUDIO_MODE_STEREO
        new: plm_audio_mode_stereo
      - old: PLM_AUDIO_MODE_JOINT_STEREO
        new: plm_audio_mode_joint_stereo
      - old: PLM_AUDIO_MODE_DUAL_CHANNEL
        new: plm_audio_mode_dual_channel
      - old: PLM_AUDIO_MODE_MONO
        new: plm_audio_mode_mono
      - old: PLM_AUDIO_SAMPLE_RATE
        new: plm_audio_sample_rate
      - old: PLM_AUDIO_BIT_RATE
        new: plm_audio_bit_rate
      - old: PLM_AUDIO_SCALEFACTOR_BASE
        new: plm_audio_scalefactor_base
      - old: PLM_AUDIO_SYNTHESIS_WINDOW
        new: plm_audio_synthesis_window
      - old: PLM_AUDIO_QUANT_LUT_STEP_1
        new: plm_audio_quant_lut_step_1
      - old: PLM_AUDIO_QUANT_TAB_A
        new: plm_audio_quant_tab_a
      - old: PLM_AUDIO_QUANT_TAB_B
        new: plm_audio_quant_tab_b
      - old: PLM_AUDIO_QUANT_TAB_C
        new: plm_audio_quant_tab_c
      - old: PLM_AUDIO_QUANT_TAB_D
        new: plm_audio_quant_tab_d
      - old: QUANT_LUT_STEP_2
        new: quant_lut_step_2
      - old: PLM_AUDIO_QUANT_LUT_STEP_3
        new: plm_audio_quant_lut_step_3
      - old: PLM_AUDIO_QUANT_LUT_STEP_4
        new: plm_audio_quant_lut_step_4
      - old: PLM_AUDIO_QUANT_TAB
        new: plm_audio_quant_tab
        # Avoids: https://github.com/gotranspile/cxgo/issues/55
      # - old: (*uint8)(libc.Realloc(unsafe.Pointer(self.Bytes), int(new_size)))
      #   new: (*uint8)(realloc(unsafe.Pointer(self.Bytes), int(self.Capacity), int(new_size)))